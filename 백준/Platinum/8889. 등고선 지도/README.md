# [Platinum II] 등고선 지도 - 8889 

[문제 링크](https://www.acmicpc.net/problem/8889) 

### 성능 요약

메모리: 41072 KB, 시간: 1016 ms

### 분류

값 / 좌표 압축, 자료 구조, 느리게 갱신되는 세그먼트 트리, 세그먼트 트리, 스위핑

### 제출 일자

2024년 6월 11일 16:40:47

### 문제 설명

<p>한려해상국립공원은 한반도의 남쪽에 있으며, 120km에 걸친 독특한 해양 생태계를 가지고 있다. 공원은 360개 이상의 섬으로 이루어져 있으며, 섬의 크기도 모두 제각각 다르다. 69개의 무인도와 30개의 유인도로 이루어진 아름다운 수로는 바다의 보석과 같다는 찬사를 받는다.</p>

<p>공원 관리자 김상근은 등고선을 이용해 공원 내의 모든 섬의 고도를 조사하려고 한다. 등고선은 해발 고도가 같은 지점을 연결한 곡선이며, 볼록한 닫힌 곡선이다. (그림 1)</p>

<p>한려해상국립공원의 섬을 나타내는 등고선은 서로 겹치지 않으며, 타원과 같은 단순 볼록 곡선이며 닫혀있다. </p>

<p>컴퓨터는 등고선 지도를 디지털 등고선 지도로 변형해서 사용한다. 디지털 등고선 지도의 등고선은 볼록 직교 다각형 (그림 2) 이다. 직교 다각형이란 모든 변이 수직 또는 수평인 다각형이다. 직교 다각형 P가 볼록이 되려면, P의 모든 내부와 수직선 또는 수평선과의 교점이 비어있거나 선분이어야 한다.</p>

<p>가장 바깥에 있는 등고선은 레벨 1이다. 등고선 c를 둘러싼 등고선의 레벨이 k인 경우에 c의 레벨은 k+1이다. 그림 2에의 지도에서 가장 높은 등고선의 레벨은 5이다.</p>

<p><img alt="" src="https://www.acmicpc.net/upload/images/cantour2.png" style="height:273px; width:643px"></p>

<p>등고선 n개로 이루어진 디지털 등고선 지도가 주어진다. 이때, 가장 높은 등고선의 레벨을 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>첫째 줄에 테스트 케이스의 개수 T가 주어진다. 각 테스트 케이스의 첫째 줄에는 등고선의 개수 m(1 ≤ m ≤ 20,000)이 주어진다. 다음 m개 줄에는 각 등고선의 정보를 나타내는 2k+1개의 정수 k, x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub>, ..., x<sub>k</sub>, y<sub>k</sub> (4 ≤ k ≤ 100, 1 ≤ x<sub>i</sub>, y<sub>i</sub> ≤ 10<sup>9</sup>) 가 주어진다. k는 볼록 직교 다각형 Q의 꼭짓점의 개수를 나타내며, (x<sub>i</sub>, y<sub>i</sub>)는 Q의 꼭짓점을 나타낸다. 꼭짓점은 반시계방향으로 주어진다. 두 볼록 직교 다각형이 겹치는 경우는 없다.</p>

### 출력 

 <p>각 테스트 케이스마다 가장 높은 등고선의 레벨을 출력한다.</p>

